# The Capitalizing Agent (Interjector)

The **Capitalizer** is a specialized Meta-Agent that operates concurrently with the Primary Actors. Its purpose is to accelerate resolution by identifying hidden strategic overlaps between the actors that they themselves cannot see.

## 1. The Core Problem: Invisible Overlap

In any complex negotiation, actors have hidden goals and constraints encoded in their mutable strategies or internal monologues. 
*   **Agent A** might privately be willing to concede on Parameter Y, but only if they get Resource Z. They haven't stated this publicly because they fear losing leverage.
*   **Agent B** might actually not care about Parameter Y at all, but they are protecting Resource Z. 

Because both are guarding their internal states, they deadlock publicly.

## 2. The Mechanism of Action

The Capitalizer acts as a privileged observer. It has access to the `public_transcript`, but critically, it can also eavesdrop on the `internal_monologue` generated by the Actors on previous turns.

### The Interjection Loop

1.  **Observation**: Before a Primary Actor (e.g., Agent A) generates its turn, the Capitalizer reviews the entire state, including Agent B's recent internal reasonings.
2.  **Overlap Calculation**: The Capitalizer determines if there is a mathematically viable trade that satisfies both actors' hidden conditions.
3.  **The "Whisper"**: If an overlap is found, the Capitalizer generates a concise "hint". This hint is injected *only* into Agent A's `EnvironmentState` payload for that specific turn. Agent B does not see it.

## 3. Privacy and Sandboxing

The Capitalizer is extremely dangerous to the simulation's integrity if it "leaks" an opponent's exact core goals. It operates under strict constraints:

*   **No Direct Quotes**: The Capitalizer is forbidden from directly quoting an opponent's internal monologue. 
*   **Obfuscated Hints**: It must offer suggestions as strategic hypotheses (e.g., *"They appear desperate for Z; offering it to them may yield a concession on Y"*), not definitive statements of the opponent's hidden state.

## 4. The Capitalizer Output Schema (Zod)

> **Reference**: The complete `CapitalizerHint` Zod schema is maintained natively in the core library API definitions. See [`api_and_interfaces.md` ยง1F](./api_and_interfaces.md).

## 5. The Capitalizer Prompt (System Level)

> **Reference**: The complete system prompt for the Capitalizer, including `CRITICAL CONSTRAINTS` and few-shot examples, is defined in [`core_system_prompts.md` ยง2](./core_system_prompts.md#the-capitalizer-prompt-interjector).

## 6. Integration into the Environment

The hint generated by the Capitalizer is appended to the `EnvironmentState` under the `injections` parameter for the active speaker. (See `agent_design_and_state.md`).

```json
{
  "environmental_variables": { ... },
  "injections": {
      "capitalizer_hint": "They are prioritizing immediate relief. Dropping your demand for scheduled inspections might be sufficient if you stick to the baseline."
  }
}
```
